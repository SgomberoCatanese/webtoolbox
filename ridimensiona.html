<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ridimensiona immagini online gratis â€“ WebToolbox.fun</title>
    <meta name="description" content="Cambia dimensioni alle immagini JPG, PNG facilmente e online. Mantieni proporzioni, carica piÃ¹ file e scarica subito." />
    <style>
      /* CSS v5.0 - Integrated with Resize page */
      :root { /* Default Dark Theme */
        --bg-primary: #1C1C1E;
        --bg-secondary: #2C2C2E;
        --bg-tertiary: #3A3A3C;
        --text-primary: #FFFFFF;
        --text-secondary: #EBEBF599;
        --accent-primary: #0A84FF;
        --separator-color: #38383A;
        --nav-bg: rgba(28, 28, 30, 0.65); /* Adjusted for glass effect */
      }
      [data-theme="light"] {
        --bg-primary: #F2F2F7;
        --bg-secondary: #FFFFFF;
        --bg-tertiary: #E5E5EA;
        --text-primary: #000000;
        --text-secondary: #3C3C4399;
        --accent-primary: #007AFF;
        --separator-color: #C6C6C8;
        --nav-bg: rgba(249, 249, 249, 0.65); /* Adjusted for glass effect */
      }
      [data-theme="midnight"] {
        --bg-primary: #000000;
        --bg-secondary: #1D1D1F;
        --bg-tertiary: #2C2C2E;
        --text-primary: #FFFFFF;
        --accent-primary: #0A84FF;
        --nav-bg: rgba(10, 10, 10, 0.6); /* Adjusted for glass effect */
      }
      [data-theme="slate"] {
        --bg-primary: #29313E;
        --bg-secondary: #354152;
        --bg-tertiary: #495867;
        --text-primary: #F7F7F7;
        --accent-primary: #F9A03F;
        --separator-color: #495867;
        --nav-bg: rgba(25, 32, 41, 0.65); /* Adjusted for glass effect */
      }

      /* Base and Global Styles */
      *, *::before, *::after { box-sizing: border-box; }
      html { scroll-behavior: smooth; }
      body {
        background: var(--bg-primary);
        color: var(--text-primary);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        margin: 0; padding: 0;
        display: flex; flex-direction: column; min-height: 100vh;
      }
      body.no-scroll { overflow: hidden; }

      /* Navigation Bar - Enhanced Glass Effect */
      nav {
        width: 100%;
        background: var(--nav-bg);
        backdrop-filter: blur(32px) saturate(180%); /* Increased blur */
        -webkit-backdrop-filter: blur(32px) saturate(180%);
        border-bottom: 0.5px solid var(--separator-color);
        padding: 1rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky; top: 0; z-index: 20;
      }
      nav .logo { font-weight: 600; color: var(--text-primary); display: flex; align-items: center; gap: 0.5rem; }
      nav .logo img { width: 32px; height: 32px; border-radius: 8px; object-fit: cover; }
      .nav-title-scrolled { display: none; font-weight: 600; }
      nav .desktop-nav { display: flex; gap: 1.5rem; list-style: none; margin: 0; padding: 0; }
      nav a { color: var(--accent-primary); text-decoration: none; font-weight: 500; transition: color 0.2s; }
      nav a:hover { color: var(--text-primary); }
      nav a.active { color: var(--text-primary); font-weight: 600; }
      .nav-controls { display: flex; align-items: center; gap: 0.75rem; }
      
      /* Mobile Menu */
      #mobile-menu-trigger, #mobile-menu-close {
        display: none; background: none; border: none; cursor: pointer; padding: 0.5rem; color: var(--accent-primary); z-index: 110;
      }
      #mobile-menu-close { position: absolute; top: 1rem; right: 1.5rem; }
      #mobile-menu-trigger svg, #mobile-menu-close svg { width: 28px; height: 28px; }
      .mobile-nav {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: var(--bg-secondary);
        z-index: 100; display: flex; flex-direction: column;
        padding: 6rem 1.5rem 2rem;
        transform: translateX(-100%);
        transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
      }
      .mobile-nav.active { transform: translateX(0); }
      .mobile-nav ul { list-style: none; padding: 0; margin: 0; }
      .mobile-nav ul a { display: block; font-size: 1.25rem; padding: 1rem; color: var(--text-primary); font-weight: 500; border-bottom: 0.5px solid var(--separator-color); }
      .mobile-nav .nav-controls { margin-top: auto; justify-content: center; }

      /* Main Content */
      main { max-width: 800px; margin: 2rem auto; padding: 0 1.5rem; width: 100%; }
      h1 { text-align: center; margin-bottom: 0.5rem; font-size: 2.5rem; font-weight: 700; }
      p.description { text-align: center; margin-bottom: 2.5rem; color: var(--text-secondary); line-height: 1.5; }
      
      /* UI Elements */
      #banner {
        background-color: var(--accent-primary);
        color: #FFFFFF;
        padding: 1rem 1.5rem;
        border-radius: 14px;
        text-align: center;
        font-weight: 600;
        margin: 2rem 0;
        display: none;
      }
      select, input[type="number"] {
        display: block; margin: 0.5rem auto 1.5rem auto; padding: 0.9rem 1rem; border-radius: 12px;
        border: 1px solid var(--separator-color); font-weight: 400; cursor: pointer; max-width: 320px;
        width: 100%; background-color: var(--bg-tertiary); color: var(--text-primary); font-family: inherit;
        font-size: 1rem; text-align: left; -webkit-appearance: none; appearance: none;
      }
      input:focus, select:focus {
        outline: none; border-color: var(--accent-primary); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-primary) 25%, transparent);
      }
      button {
        display: block; margin: 2rem auto; padding: 0.9rem 1.5rem; background-color: var(--accent-primary);
        border: none; border-radius: 50px; font-weight: 600; cursor: pointer; color: #FFFFFF;
        max-width: 240px; width: 100%; font-size: 1rem; font-family: inherit; transition: all 0.2s ease-in-out;
      }
      button:hover { transform: scale(1.05); filter: brightness(1.1); }
      input[type="file"] { display: none; }
      .upload-label button { max-width: 320px; margin-bottom: 2rem; }
      label {
        display: block; margin: 1.5rem auto 0.5rem; font-weight: 500;
        color: var(--text-secondary); text-align: center; max-width: 320px;
      }
      select#themeSelector {
        padding: 0.5rem 0.8rem; font-size: 0.9rem; width: auto;
      }
      
      /* Preview and Result Containers */
      #previewContainer {
        display: flex; flex-wrap: wrap; gap: 15px; padding: 1rem; border-radius: 20px;
        background-color: var(--bg-secondary); margin: 2rem 0; justify-content: center; min-height: 100px;
      }
      #previewContainer img { max-height: 120px; border-radius: 12px; object-fit: contain; }
      #resultContainer {
        text-align: center; margin-top: 2rem; display: flex;
        flex-direction: column; align-items: center; gap: 1.5rem;
      }
      #resultContainer img { max-width: 100%; border-radius: 20px; background-color: var(--bg-secondary); padding: 0.5rem; }
      #resultContainer a { font-weight: 500; color: var(--accent-primary); text-decoration: none; cursor: pointer; font-size: 1.1rem; }

      /* Responsive */
      @media (max-width: 768px) {
        nav { padding: 0.75rem 1rem; }
        nav .logo, nav .desktop-nav { display: none; }
        .nav-title-scrolled { display: block; }
        #mobile-menu-trigger { display: block; }
        h1 { font-size: 2rem; }
        main { padding: 0 1rem; }
      }
    </style>
</head>
<body>
    <nav>
      <div class="logo">
        <img src="https://images.pexels.com/photos/4164418/pexels-photo-4164418.jpeg?auto=compress&cs=tinysrgb&w=64&h=64&dpr=2" alt="WebToolbox Logo" />
        ðŸ§° WebToolbox
      </div>
      <div class="nav-title-scrolled">Ridimensiona Immagini</div>
      <ul class="desktop-nav">
        <li><a href="index.html">Converti</a></li>
        <li><a href="ridimensiona.html" class="active">Ridimensiona</a></li>
        <li><a href="ruota-immagini.html">Ruota</a></li>
        <li><a href="flip-immagini.html">Specchia</a></li>
        <li><a href="crop-immagini.html">Ritaglia</a></li>
        <li><a href="base64.html">Base64</a></li>
        <li><a href="scala-grigi.html">Filtri</a></li>
        <li><a href="share.html">Condividi</a></li>
      </ul>
      <div class="nav-controls">
        <select id="themeSelector" title="Seleziona Tema">
          <option value="dark">Scuro</option> <option value="light">Chiaro</option> <option value="midnight">Midnight</option> <option value="slate">Slate</option>
        </select>
      </div>
      <button id="mobile-menu-trigger" title="Apri Menu">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <line x1="3" y1="6" x2="21" y2="6" /><line x1="3" y1="12" x2="21" y2="12" /><line x1="3" y1="18" x2="21" y2="18" />
        </svg>
      </button>
    </nav>
    <div class="mobile-nav" id="mobileMenu">
      <button id="mobile-menu-close" title="Chiudi Menu">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
      <ul>
        <li><a href="index.html">Converti</a></li>
        <li><a href="ridimensiona.html" class="active">Ridimensiona</a></li>
        <li><a href="ruota-immagini.html">Ruota</a></li>
        <li><a href="flip-immagini.html">Specchia</a></li>
        <li><a href="crop-immagini.html">Ritaglia</a></li>
        <li><a href="base64.html">Base64</a></li>
        <li><a href="scala-grigi.html">Filtri</a></li>
        <li><a href="share.html">Condividi</a></li>
      </ul>
      <div class="nav-controls">
        <select id="themeSelectorMobile" title="Seleziona Tema">
          <option value="dark">Scuro</option> <option value="light">Chiaro</option> <option value="midnight">Midnight</option> <option value="slate">Slate</option>
        </select>
      </div>
    </div>

    <main>
        <h1>Ridimensiona immagini online gratis</h1>
        <p class="description">Carica immagini JPG o PNG, scegli le dimensioni e scarica subito le immagini ridimensionate.</p>

        <div id="banner"></div>

        <div class="upload-label">
            <button onclick="document.getElementById('inputFiles').click()" type="button">Seleziona Immagini</button>
        </div>
        <input type="file" id="inputFiles" accept="image/png, image/jpeg" multiple />

        <div id="previewContainer" aria-live="polite" aria-label="Anteprima immagini caricate"></div>

        <label for="standardSizes">Dimensioni standard</label>
        <select id="standardSizes" aria-label="Seleziona dimensioni standard">
            <option value="">-- Seleziona o inserisci manualmente --</option>
            <option value="1920x1080">1920 x 1080 (Full HD)</option>
            <option value="1280x720">1280 x 720 (HD)</option>
            <option value="1024x768">1024 x 768 (XGA)</option>
            <option value="800x600">800 x 600 (SVGA)</option>
            <option value="640x480">640 x 480 (VGA)</option>
            <option value="320x240">320 x 240 (QVGA)</option>
        </select>

        <label for="widthInput">Larghezza (px)</label>
        <input type="number" id="widthInput" min="1" placeholder="Es. 800" aria-label="Larghezza in pixel" />

        <label for="heightInput">Altezza (px)</label>
        <input type="number" id="heightInput" min="1" placeholder="Es. 600" aria-label="Altezza in pixel" />

        <button id="resizeBtn">Ridimensiona</button>

        <div id="resultContainer"></div>
    </main>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- Navigation and Theme Logic ---
        const body = document.body;
        const mobileMenu = document.getElementById("mobileMenu");
        const mobileTrigger = document.getElementById("mobile-menu-trigger");
        const mobileClose = document.getElementById("mobile-menu-close");
        const themeSelector = document.getElementById("themeSelector");
        const themeSelectorMobile = document.getElementById("themeSelectorMobile");

        mobileTrigger.addEventListener("click", () => {
            mobileMenu.classList.add("active");
            body.classList.add("no-scroll");
        });
        mobileClose.addEventListener("click", () => {
            mobileMenu.classList.remove("active");
            body.classList.remove("no-scroll");
        });
        function applyTheme(theme) {
            document.documentElement.setAttribute("data-theme", theme);
            localStorage.setItem("theme", theme);
            if (themeSelector) themeSelector.value = theme;
            if (themeSelectorMobile) themeSelectorMobile.value = theme;
        }
        if (themeSelector) themeSelector.addEventListener("change", (e) => applyTheme(e.target.value));
        if (themeSelectorMobile) themeSelectorMobile.addEventListener("change", (e) => applyTheme(e.target.value));
        const savedTheme = localStorage.getItem("theme") || "dark";
        applyTheme(savedTheme);

        // --- Image Resizing App Logic ---
        const inputFiles = document.getElementById('inputFiles');
        const standardSizes = document.getElementById('standardSizes');
        const widthInput = document.getElementById('widthInput');
        const heightInput = document.getElementById('heightInput');
        const resizeBtn = document.getElementById('resizeBtn');
        const previewContainer = document.getElementById('previewContainer');
        const resultContainer = document.getElementById('resultContainer');
        const banner = document.getElementById('banner');
        let loadedFiles = [];

        standardSizes.addEventListener('change', () => {
            const val = standardSizes.value;
            if (!val) return;
            const [w, h] = val.split('x').map(Number);
            widthInput.value = w;
            heightInput.value = h;
        });

        widthInput.addEventListener('input', () => { standardSizes.value = ''; });
        heightInput.addEventListener('input', () => { standardSizes.value = ''; });

        inputFiles.addEventListener('change', e => {
            loadedFiles = Array.from(e.target.files).filter(f => f.type.startsWith('image/'));
            previewContainer.innerHTML = '';
            resultContainer.innerHTML = '';
            if (loadedFiles.length) {
                banner.textContent = `Hai caricato ${loadedFiles.length} immagine${loadedFiles.length > 1 ? 'i' : ''}.`;
                banner.style.display = 'block';
                loadedFiles.forEach(file => {
                    const reader = new FileReader();
                    reader.onload = ev => {
                        const img = document.createElement('img');
                        img.src = ev.target.result;
                        img.alt = file.name;
                        previewContainer.appendChild(img);
                    };
                    reader.readAsDataURL(file);
                });
            } else {
                banner.style.display = 'none';
            }
        });

        resizeBtn.addEventListener('click', () => {
            if (!loadedFiles.length) {
                alert('Seleziona almeno un file immagine.');
                return;
            }
            const width = parseInt(widthInput.value);
            const height = parseInt(heightInput.value);
            if (!width || !height || width <= 0 || height <= 0) {
                alert('Inserisci larghezza e altezza validi.');
                return;
            }
            resultContainer.innerHTML = '';
            loadedFiles.forEach(file => {
                const reader = new FileReader();
                reader.onload = e => {
                    const img = new Image();
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        canvas.width = width;
                        canvas.height = height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        canvas.toBlob(blob => {
                            const url = URL.createObjectURL(blob);
                            const imageContainer = document.createElement('div');

                            const imageElem = document.createElement('img');
                            imageElem.src = url;
                            imageElem.alt = 'Immagine ridimensionata';
                            imageContainer.appendChild(imageElem);

                            const link = document.createElement('a');
                            link.href = url;
                            const originalFileName = file.name.split('.').slice(0, -1).join('.');
                            link.download = `${originalFileName}_${width}x${height}.png`;
                            link.textContent = 'Scarica ' + link.download;
                            imageContainer.appendChild(link);
                            
                            resultContainer.appendChild(imageContainer);
                        }, 'image/png');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });
        });
    });
    </script>
</body>
</html>
