<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weight Converter</title>
    <style>
      /* CSS v5.0 - Cleaned and Consolidated */
      :root { /* Default Dark Theme */
        --bg-primary: #1C1C1E;
        --bg-secondary: #2C2C2E;
        --bg-tertiary: #3A3A3C;
        --text-primary: #FFFFFF;
        --text-secondary: #EBEBF599;
        --accent-primary: #0A84FF;
        --separator-color: #38383A;
        --nav-bg: rgba(28, 28, 30, 0.8);
        --shadow-color: rgba(0, 0, 0, 0.5);
      }
      [data-theme="light"] {
        --bg-primary: #F2F2F7;
        --bg-secondary: #FFFFFF;
        --bg-tertiary: #E5E5EA;
        --text-primary: #000000;
        --text-secondary: #3C3C4399;
        --accent-primary: #007AFF;
        --separator-color: #C6C6C8;
        --nav-bg: rgba(249, 249, 249, 0.8);
        --shadow-color: rgba(0, 0, 0, 0.08);
      }
      [data-theme="midnight"] {
        --bg-primary: #000000;
        --bg-secondary: #1D1D1F;
        --bg-tertiary: #2C2C2E;
        --text-primary: #FFFFFF;
        --accent-primary: #0A84FF;
        --shadow-color: rgba(0, 0, 0, 0.6);
        --nav-bg: rgba(0, 0, 0, 0.75);
      }
      [data-theme="slate"] {
        --bg-primary: #29313E;
        --bg-secondary: #354152;
        --bg-tertiary: #495867;
        --text-primary: #F7F7F7;
        --accent-primary: #F9A03F;
        --separator-color: #495867;
        --nav-bg: rgba(25, 32, 41, 0.8);
      }

      /* Base and Animation Styles */
      *, *::before, *::after { box-sizing: border-box; }
      html { scroll-behavior: smooth; }
      body {
        background: var(--bg-primary);
        color: var(--text-primary);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        margin: 0;
        padding: 0;
        transition: background 0.4s, color 0.4s;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      body.no-scroll { overflow: hidden; }
      @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

      /* Navigation Bar */
      nav {
        width: 100%;
        background: var(--nav-bg);
        backdrop-filter: blur(24px) saturate(180%);
        -webkit-backdrop-filter: blur(24px) saturate(180%);
        border-bottom: 0.5px solid var(--separator-color);
        padding: 1rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 20;
      }
      nav .logo { 
        font-weight: 600; 
        color: var(--text-primary); 
        display: flex; 
        align-items: center; 
        gap: 0.5rem; 
      }
      nav .logo img {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        object-fit: cover;
      }
      .nav-title-scrolled {
        display: none; /* Hidden by default, shown on mobile */
        font-weight: 600;
      }
      nav .desktop-nav { display: flex; gap: 1.5rem; list-style: none; margin: 0; padding: 0; }
      nav a { color: var(--accent-primary); text-decoration: none; font-weight: 500; transition: color 0.2s; }
      nav a:hover { color: var(--text-primary); }
      nav a.active { color: var(--text-primary); font-weight: 600; }
      .nav-controls { display: flex; align-items: center; gap: 0.75rem; }
      
      /* Mobile Menu */
      #mobile-menu-trigger {
        display: none; background: none; border: none; cursor: pointer;
        padding: 0.5rem; color: var(--accent-primary);
      }
      #mobile-menu-trigger svg { width: 28px; height: 28px; }
      .mobile-nav {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: var(--bg-secondary);
        z-index: 100; display: flex; flex-direction: column;
        padding: 6rem 1.5rem 2rem;
        transform: translateX(-100%);
        transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
      }
      .mobile-nav.active { transform: translateX(0); }
      .mobile-nav ul { list-style: none; padding: 0; margin: 0; }
      .mobile-nav ul a {
        display: block; font-size: 1.25rem; padding: 1rem;
        color: var(--text-primary); font-weight: 500; border-bottom: 0.5px solid var(--separator-color);
      }
      .mobile-nav .nav-controls { margin-top: auto; justify-content: center; }

      /* Main Converter Container */
      .container {
        background-color: var(--bg-secondary);
        color: var(--text-primary);
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 0 30px var(--shadow-color);
        display: flex;
        flex-direction: column;
        gap: 25px;
        width: 90%;
        max-width: 450px;
        animation: fadeIn 0.5s ease-out;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        margin-top: 50px;
      }
      .container h1 {
        margin: -10px 0 20px 0;
        text-align: center;
        font-size: 2em;
        color: var(--text-primary);
      }
      .container > div {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      label {
        font-weight: 500;
        color: var(--text-secondary);
        font-size: 1.1em;
        width: 160px;
        transition: color 0.3s ease;
      }
      input[type="number"] {
        background-color: var(--bg-tertiary);
        color: var(--text-primary);
        padding: 14px;
        border: 1px solid var(--separator-color);
        border-radius: 10px;
        width: 250px;
        font-size: 1.1em;
        transition: background-color 0.2s, border-color 0.2s, color 0.3s;
      }
      input[type="number"]:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--accent-primary) 25%, transparent);
      }
      .conversion-highlight {
        background-color: color-mix(in srgb, var(--accent-primary) 15%, var(--bg-tertiary));
        border-color: var(--accent-primary) !important;
      }
      
      /* Buttons */
      .buttons-container {
        display: flex;
        gap: 15px;
        justify-content: flex-end;
        margin-top: 15px;
      }
      button {
        padding: 14px 28px;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.1em;
        font-weight: 500;
        transition: background-color 0.3s ease, filter 0.2s;
      }
      button:hover { filter: brightness(1.1); }
      #convertButton { background-color: var(--accent-primary); }
      #clearButton { background-color: var(--text-secondary); }

      /* Select Dropdown */
      select {
        padding: 0.5rem 0.8rem; border-radius: 8px; border: none; 
        font-weight: 500; cursor: pointer;
        background-color: var(--bg-tertiary); color: var(--text-primary); 
        font-family: inherit; font-size: 0.9rem;
        -webkit-appearance: none; appearance: none;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        nav { padding: 0.75rem 1rem; }
        nav .logo, nav .desktop-nav { display: none; }
        .nav-title-scrolled { display: block; }
        #mobile-menu-trigger { display: block; }
        .container { width: 100%; border-radius: 0; }
        .container > div { flex-direction: column; align-items: flex-start; gap: 8px; }
        label, input[type="number"] { width: 100%; }
      }
    </style>
</head>
<body>
    <nav>
      <div class="logo">
        <img src="https://images.pexels.com/photos/4164418/pexels-photo-4164418.jpeg?auto=compress&cs=tinysrgb&w=64&h=64&dpr=2" alt="WebToolbox Logo" />
        <span>ðŸ§° WebToolbox</span>
      </div>
      <div class="nav-title-scrolled">Weight Converter</div>
      <ul class="desktop-nav">
                <li><a href="weight.html" class="active">Converti Peso</a></li>
        <li><a href="ridimensiona.html">Ridimensiona</a></li>
        <li><a href="ruota-immagini.html">Ruota</a></li>
        <li><a href="flip-immagini.html">Specchia</a></li>
        <li><a href="crop-immagini.html">Ritaglia</a></li>
        <li><a href="base64.html">Base64</a></li>
        <li><a href="scala-grigi.html">Filtri</a></li>
        <li><a href="index.html">Converti Foto</a></li>
        <li><a href="share.html">Condividi</a></li>
      </ul>
      <div class="nav-controls">
        <select id="themeSelector" title="Select Theme">
          <option value="dark">Scuro</option>
          <option value="light">Chiaro</option>
          <option value="midnight">Midnight</option>
          <option value="slate">Slate</option>
        </select>
      </div>
      <button id="mobile-menu-trigger" title="Open Menu">
        <svg xmlns="http://www.w.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <line x1="3" y1="6" x2="21" y2="6" /><line x1="3" y1="12" x2="21" y2="12" /><line x1="3" y1="18" x2="21" y2="18" />
        </svg>
      </button>
    </nav>

    <div class="mobile-nav" id="mobileMenu">
      <ul>
        <li><a href="#">Converti</a></li>
        <li><a href="#">Ridimensiona</a></li>
        <li><a href="#">Ruota</a></li>
        <li><a href="#">Specchia</a></li>
        <li><a href="#" class="active">Converti Peso</a></li>
      </ul>
      <div class="nav-controls">
        <select id="themeSelectorMobile" title="Select Theme">
          <option value="dark">Scuro</option>
          <option value="light">Chiaro</option>
          <option value="midnight">Midnight</option>
          <option value="slate">Slate</option>
        </select>
      </div>
    </div>

    <div class="container">
        <h1>Weight Converter</h1>
        <div>
            <label for="kilograms">Kilograms (kg):</label>
            <input type="number" id="kilograms" placeholder="e.g., 1">
        </div>
        <div>
            <label for="grams">Grams (g):</label>
            <input type="number" id="grams" placeholder="e.g., 1000">
        </div>
        <div>
            <label for="pounds">Pounds (lbs):</label>
            <input type="number" id="pounds" placeholder="e.g., 2.2">
        </div>
        <div>
            <label for="milligrams">Milligrams (mg):</label>
            <input type="number" id="milligrams" placeholder="e.g., 1000000">
        </div>
        <div class="buttons-container">
            <button id="clearButton">Clear</button>
            <button id="convertButton">Convert</button>
        </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- Theme and Menu Elements ---
        const body = document.body;
        const mobileMenu = document.getElementById("mobileMenu");
        const mobileTrigger = document.getElementById("mobile-menu-trigger");
        const themeSelector = document.getElementById("themeSelector");
        const themeSelectorMobile = document.getElementById("themeSelectorMobile");
        
        // --- Weight Converter Elements ---
        const kilogramsInput = document.getElementById('kilograms');
        const gramsInput = document.getElementById('grams');
        const poundsInput = document.getElementById('pounds');
        const milligramsInput = document.getElementById('milligrams');
        const convertButton = document.getElementById('convertButton');
        const clearButton = document.getElementById('clearButton');

        // --- Mobile Menu Logic ---
        mobileTrigger.addEventListener("click", () => {
          mobileMenu.classList.toggle("active");
          body.classList.toggle("no-scroll");
        });

        // --- Theme Switcher Logic ---
        function applyTheme(theme) {
          document.documentElement.setAttribute("data-theme", theme);
          localStorage.setItem("theme", theme);
          themeSelector.value = theme;
          themeSelectorMobile.value = theme;
        }

        themeSelector.addEventListener("change", (e) => applyTheme(e.target.value));
        themeSelectorMobile.addEventListener("change", (e) => applyTheme(e.target.value));

        const savedTheme = localStorage.getItem("theme") || "dark";
        applyTheme(savedTheme);

        // --- Weight Converter Logic ---
        const highlightDuration = 300;
        
        function highlightInput(inputElement) {
            inputElement.classList.add('conversion-highlight');
            setTimeout(() => {
                inputElement.classList.remove('conversion-highlight');
            }, highlightDuration);
        }

        function clearAllInputsExcept(elementToExclude) {
            const inputs = [kilogramsInput, gramsInput, poundsInput, milligramsInput];
            inputs.forEach(input => {
                if (input !== elementToExclude) {
                    input.value = '';
                }
            });
        }
        
        function updateConversions(sourceInput) {
            let kg = 0;
            const value = parseFloat(sourceInput.value);
            
            if (isNaN(value)) {
                clearAllInputsExcept(sourceInput);
                return;
            }

            switch(sourceInput.id) {
                case 'kilograms':
                    kg = value;
                    break;
                case 'grams':
                    kg = value / 1000;
                    break;
                case 'pounds':
                    kg = value / 2.20462;
                    break;
                case 'milligrams':
                    kg = value / 1000000;
                    break;
            }
            
            if (sourceInput !== kilogramsInput) kilogramsInput.value = kg.toFixed(3);
            if (sourceInput !== gramsInput) gramsInput.value = (kg * 1000).toFixed(2);
            if (sourceInput !== poundsInput) poundsInput.value = (kg * 2.20462).toFixed(2);
            if (sourceInput !== milligramsInput) milligramsInput.value = (kg * 1000000).toFixed(2);
            
            [kilogramsInput, gramsInput, poundsInput, milligramsInput].forEach(input => {
                if (input !== sourceInput) highlightInput(input);
            });
        }
        
        [kilogramsInput, gramsInput, poundsInput, milligramsInput].forEach(input => {
            input.addEventListener('input', () => updateConversions(input));
        });

        convertButton.addEventListener('click', () => {
            alert("Conversions update in real-time as you type!");
        });

        clearButton.addEventListener('click', () => {
            kilogramsInput.value = '';
            gramsInput.value = '';
            poundsInput.value = '';
            milligramsInput.value = '';
        });
      });
    </script>
</body>
</html>
