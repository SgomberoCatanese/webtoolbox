<!DOCTYPE html>
<html lang="en">
  <style>
    /* style.css */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 40px;
    background-color: #f8f9fa;
    color: #343a40;
    transition: background-color 0.3s ease, color 0.3s ease;
}

body.dark-mode {
    background-color: #212529;
    color: #f8f9fa;
}

body.dark-mode h1 {
    color: #f8f9fa;
}

.theme-toggle {
    position: absolute;
    top: 20px;
    right: 20px;
}

.theme-toggle-label {
    display: inline-block;
    width: 50px;
    height: 25px;
    background: #ccc;
    border-radius: 15px;
    position: relative;
    transition: background-color 0.3s ease;
    cursor: pointer;
}

.theme-toggle-label:after {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    width: 19px;
    height: 19px;
    background: #fff;
    border-radius: 50%;
    transition: 0.3s ease;
}

.theme-toggle input[type="checkbox"] {
    height: 0;
    width: 0;
    visibility: hidden;
}

.theme-toggle input:checked + .theme-toggle-label {
    background: #6c757d;
}

.theme-toggle input:checked + .theme-toggle-label:after {
    left: calc(100% - 22px);
}

h1 {
    margin-bottom: 50px;
    color: #343a40;
    text-align: center;
    font-size: 2.7em;
}

body.dark-mode h1 {
    color: #f8f9fa;
}

.container {
    background-color: #ffffff;
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.15);
    display: flex;
    flex-direction: column;
    gap: 25px;
    width: 450px;
    animation: fadeIn 0.5s ease-out;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

body.dark-mode .container {
    background-color: #343a40;
    box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
}

.container > div {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

label {
    font-weight: 500;
    color: #495057;
    font-size: 1.15em;
    width: 160px;
    transition: color 0.3s ease;
}

body.dark-mode label {
    color: #ced4da;
}

input[type="number"] {
    padding: 14px;
    border: 1px solid #ced4da;
    border-radius: 10px;
    width: 250px;
    font-size: 1.15em;
    transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, color 0.3s ease;
}

body.dark-mode input[type="number"] {
    background-color: #495057;
    color: #f8f9fa;
    border-color: #6c757d;
}

input[type="number"]:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

body.dark-mode input[type="number"]:focus {
    border-color: #007bff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);
}

.conversion-highlight {
    background-color: #e9ecef;
    border-color: #007bff !important;
}

body.dark-mode .conversion-highlight {
    background-color: #6c757d;
    border-color: #007bff !important;
    color: #f8f9fa;
}

.buttons-container {
    display: flex;
    gap: 15px;
    justify-content: flex-end;
    margin-top: 30px;
}

button {
    padding: 16px 32px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1.2em;
    transition: background-color 0.3s ease;
}

body.dark-mode button {
    background-color: #007bff;
    color: #fff;
}

button:hover {
    background-color: #0056b3;
}

body.dark-mode button:hover {
    background-color: #0056b3;
}

#clearButton {
    background-color: #6c757d;
}

body.dark-mode #clearButton {
    background-color: #6c757d;
    color: #fff;
}

#clearButton:hover {
    background-color: #545b62;
}

body.dark-mode #clearButton:hover {
    background-color: #545b62;
}
 /*
      Stile CSS v5.0 FINAL - Lista Formati Completa, Fallback Intelligente e Notifiche Toast
    */
    :root { /* Tema Scuro (Default) */
      --bg-primary: #1C1C1E;
      --bg-secondary: #2C2C2E;
      --bg-tertiary: #3A3A3C;
      --bg-modal-backdrop: rgba(0, 0, 0, 0.6);
      --bg-modal: rgba(40, 40, 42, 0.9);
      --text-primary: #FFFFFF;
      --text-secondary: #EBEBF599;
      --text-tertiary: #EBEBF566;
      --accent-primary: #0A84FF;
      --accent-secondary: #FF9F0A;
      --accent-destructive: #FF453A;
      --separator-color: #38383A;
      --separator-modal: #545458A6;
      --nav-bg: rgba(28, 28, 30, 0.8);
      --shadow-color: rgba(0, 0, 0, 0.5);
      --glow-color: rgba(10, 132, 255, 0.8);
    }
    [data-theme="light"] {
      --bg-primary: #F2F2F7;
      --bg-secondary: #FFFFFF;
      --bg-tertiary: #E5E5EA;
      --bg-modal-backdrop: rgba(0, 0, 0, 0.3);
      --bg-modal: rgba(245, 245, 247, 0.9);
      --text-primary: #000000;
      --text-secondary: #3C3C4399;
      --text-tertiary: #3C3C4366;
      --accent-primary: #007AFF;
      --accent-secondary: #FF9500;
      --accent-destructive: #FF3B30;
      --separator-color: #C6C6C8;
      --separator-modal: #3C3C434A;
      --nav-bg: rgba(249, 249, 249, 0.8);
      --shadow-color: rgba(0, 0, 0, 0.08);
      --glow-color: rgba(0, 122, 255, 0.7);
    }
    [data-theme="midnight"] {
      --bg-primary: #000000;
      --bg-secondary: #1D1D1F;
      --bg-tertiary: #2C2C2E;
      --text-primary: #FFFFFF;
      --accent-primary: #0A84FF;
      --shadow-color: rgba(0, 0, 0, 0.6);
      --nav-bg: rgba(0, 0, 0, 0.75);
    }
    [data-theme="slate"] {
      --bg-primary: #29313E;
      --bg-secondary: #354152;
      --bg-tertiary: #495867;
      --text-primary: #F7F7F7;
      --accent-primary: #F9A03F;
      --accent-destructive: #E54B4B;
      --separator-color: #495867;
      --nav-bg: rgba(25, 32, 41, 0.8);
      --glow-color: rgba(249, 160, 63, 0.7);
    }

    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
      transition: background 0.4s, color 0.4s;
    }
    body.no-scroll { overflow: hidden; }

    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse-glow { 0% { box-shadow: 0 0 0 0 var(--glow-color); } 70% { box-shadow: 0 0 0 10px rgba(10, 132, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(10, 132, 255, 0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes slideInDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes glow-border {
      0%, 100% { box-shadow: 0 0 5px var(--glow-color), inset 0 0 5px var(--glow-color); border-color: var(--accent-primary); }
      50% { box-shadow: 0 0 20px var(--glow-color), inset 0 0 10px var(--glow-color); border-color: var(--accent-primary); }
    }
    @keyframes progressGlow {
      0% { box-shadow: 0 0 5px var(--accent-primary); }
      50% { box-shadow: 0 0 20px var(--accent-primary); }
      100% { box-shadow: 0 0 5px var(--accent-primary); }
    }
    
    nav {
      background: var(--nav-bg);
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      border-bottom: 0.5px solid var(--separator-color);
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 20;
    }
    nav .logo { 
      font-weight: 600; 
      color: var(--text-primary); 
      display: flex; 
      align-items: center; 
      gap: 0.5rem; 
    }
    nav .logo img {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      object-fit: cover;
    }
    nav .nav-title-scrolled {
      font-weight: 600;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
    }
    nav .desktop-nav { display: flex; gap: 1.5rem; list-style: none; margin: 0; padding: 0; }
    nav a { color: var(--accent-primary); text-decoration: none; font-weight: 500; transition: color 0.2s; }
    nav a:hover { color: var(--text-primary); }
    nav a.active { color: var(--text-primary); font-weight: 600; }
    .nav-controls { display: flex; align-items: center; gap: 0.75rem; }
    
    #mobile-menu-trigger, #mobile-menu-close {
      display: none; background: none; border: none; cursor: pointer;
      padding: 0.5rem; color: var(--accent-primary); z-index: 110;
    }
    #mobile-menu-close { position: absolute; top: 1rem; right: 1.5rem; }
    #mobile-menu-trigger svg, #mobile-menu-close svg { width: 28px; height: 28px; }

    .mobile-nav {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: var(--bg-modal);
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      z-index: 100; display: flex; flex-direction: column;
      padding: 6rem 1.5rem 2rem;
      transform: translateX(-100%);
      transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    }
    .mobile-nav.active { transform: translateX(0); }
    .mobile-nav ul { list-style: none; padding: 0; margin: 0; width: 100%; }
    .mobile-nav ul a {
      display: flex; align-items: center; gap: 1rem; font-size: 1.25rem; padding: 1rem;
      color: var(--text-primary); font-weight: 500; border-bottom: 0.5px solid var(--separator-color);
    }
    .mobile-nav ul a svg { width: 24px; height: 24px; color: var(--accent-primary); }
    .mobile-nav ul li:first-child a { border-top: 0.5px solid var(--separator-color); }
    .mobile-nav .nav-controls { margin-top: auto; justify-content: center; width: 100%; display: flex; gap: 1rem; }
    
    .content-wrapper { max-width: 800px; margin: 0 auto; padding: 0 1.5rem 4rem; }
    header.main-header { padding-top: 1rem; }
    header.main-header h1 { font-size: 2.5rem; font-weight: 700; margin: 0; transition: opacity 0.2s ease-in-out; }
    p.description { margin: 0.5rem 0 2.5rem 0; color: var(--text-secondary); line-height: 1.5; font-size: 1.1rem; }
    
    .ios-card {
      background: var(--bg-secondary);
      border-radius: 12px;
      box-shadow: 0 4px 20px var(--shadow-color);
      transition: background 0.4s, box-shadow 0.4s;
    }
    .ios-list > * { padding: 1rem 1.25rem; }
    .ios-list > :not(:last-child) { border-bottom: 0.5px solid var(--separator-color); }
    .ios-list label { display: flex; justify-content: space-between; align-items: center; font-weight: 500; }

    #dropZone {
      border: 2px dashed var(--bg-tertiary); border-radius: 18px; padding: 3rem 1rem; text-align: center;
      color: var(--text-secondary); cursor: pointer; transition: all 0.3s ease-in-out; margin: 1.5rem; position: relative;
    }
    #dropZone:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
    #dropZone.drag-glow { border-style: solid; animation: glow-border 1.5s infinite; }
    #dropZone .upload-icon { width: 40px; height: 40px; margin-bottom: 1rem; color: var(--text-secondary); transition: color 0.2s; }
    #dropZone:hover .upload-icon { color: var(--accent-primary); }
    #dropZone p { margin: 0; font-weight: 500; }
    #dropZone p span { color: var(--accent-primary); font-weight: 600; }
    input[type="file"] { display: none; }
    
    select {
      padding: 0.7rem 1rem; border-radius: 8px; border: none; font-weight: 500; cursor: pointer;
      background-color: var(--bg-tertiary); color: var(--text-primary); font-family: inherit; font-size: 1rem;
      -webkit-appearance: none; appearance: none; transition: background 0.4s;
    }
    select#outputFormat { max-height: 150px; overflow-y: auto; text-align: right; }
    
    button#convertBtn {
      width: 100%; border: none; background: var(--accent-primary); color: white; font-size: 1.1rem;
      font-weight: 600; padding: 0.9rem; border-radius: 8px; cursor: pointer;
      transition: transform 0.2s, filter 0.2s; position: relative; overflow: hidden;
    }
    button#convertBtn:hover { filter: brightness(1.1); }
    button#convertBtn:active { transform: scale(0.98); }
    button#convertBtn.pulsing { animation: pulse-glow 2s infinite; }
    button#convertBtn:disabled { opacity: 0.6; cursor: not-allowed; }

    /* Progress Bar Styles */
    .progress-container {
      position: relative;
      width: 100%;
      height: 4px;
      background: var(--bg-tertiary);
      border-radius: 2px;
      margin: 1rem 0;
      overflow: hidden;
      display: none;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
      border-radius: 2px;
      width: 0%;
      transition: width 0.3s ease;
      position: relative;
      animation: progressGlow 2s infinite;
    }
    .progress-text {
      text-align: center;
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
      display: none;
    }

    #previewContainer { display: flex; flex-wrap: wrap; gap: 15px; padding: 1.5rem; justify-content: center; }
    #previewContainer img { height: 120px; border-radius: 12px; object-fit: contain; animation: fadeInUp 0.5s cubic-bezier(0.25, 1, 0.5, 1) both; }
    
    #resultContainer { margin-top: 2rem; }
    #resultContainer .ios-card { padding: 1rem; text-align: center; animation: fadeInUp 0.5s; }
    #resultContainer img { max-width: 100%; max-height: 200px; border-radius: 8px; margin-bottom: 1rem; }
    #resultContainer a { font-weight: 500; color: var(--accent-primary); text-decoration: none; font-size: 1.1rem; }

    #toastContainer {
        position: fixed;
        top: calc(env(safe-area-inset-top, 0) + 1rem);
        left: 50%;
        transform: translateX(-50%);
        z-index: 300;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        width: fit-content;
        max-width: 90%;
    }
    .toast {
      display: flex; align-items: center; gap: 0.75rem; color: var(--text-primary); background: var(--bg-modal);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      padding: 0.8rem 1.2rem; border-radius: 50px; font-size: 0.9rem; font-weight: 500;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      animation: slideInDown 0.4s cubic-bezier(0.25, 1, 0.5, 1), fadeOut 0.4s 4.5s forwards;
    }
    .toast svg { width: 20px; height: 20px; color: var(--accent-secondary); }

    .modal-backdrop {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: var(--bg-modal-backdrop);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 200; display: flex; justify-content: center; align-items: center;
      opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s;
      animation: fadeIn 0.3s;
    }
    .modal-backdrop.visible { opacity: 1; visibility: visible; }
    .modal-dialog {
      background: var(--bg-modal); border-radius: 14px; text-align: center;
      max-width: 280px; width: 90%; padding-top: 1.25rem;
      animation: zoomIn 0.3s cubic-bezier(0.25, 1, 0.5, 1);
    }
    .modal-dialog h3 { margin: 0 1rem 0.5rem; font-size: 1.1rem; font-weight: 600; }
    .modal-dialog p { margin: 0 1rem 1.25rem; font-size: 0.9rem; color: var(--text-secondary); }
    .modal-buttons { display: flex; border-top: 0.5px solid var(--separator-modal); }
    .modal-buttons button {
      flex: 1; background: none; border: none; padding: 0.8rem;
      font-size: 1.1rem; font-family: inherit; color: var(--accent-primary);
      cursor: pointer; font-weight: 600;
    }
    .modal-buttons button:first-child:not(:only-child) { border-right: 0.5px solid var(--separator-modal); font-weight: 400; }
    
    .seo-content {
        margin-top: 4rem;
        padding-top: 2rem;
        border-top: 1px solid var(--separator-color);
        color: var(--text-secondary);
    }
    .seo-content h2 { font-size: 1.8rem; font-weight: 600; color: var(--text-primary); }
    .seo-content h3 { font-size: 1.3rem; font-weight: 600; color: var(--text-primary); margin-top: 2rem; }
    .seo-content p, .seo-content li { line-height: 1.6; }
    .seo-content a { color: var(--accent-primary); text-decoration: none; }
    .seo-content a:hover { text-decoration: underline; }
    .seo-content ul { padding-left: 1.5rem; }
    .seo-content code { background-color: var(--bg-secondary); padding: 0.2em 0.4em; border-radius: 4px; font-family: monospace; }
    .faq-item { margin-bottom: 1.5rem; }
    .faq-item h4 { color: var(--text-primary); margin: 0 0 0.5rem 0; font-weight: 600; }

    @media (max-width: 768px) {
      nav { padding: 0.75rem 1rem; }
      nav .logo, nav .desktop-nav { display: none; }
      nav .nav-title-scrolled { display: block; opacity: 1; }
      #mobile-menu-trigger { display: block; }
      .content-wrapper { padding: 0 1rem 4rem; }
      header.main-header { padding: 1rem; }
      header.main-header h1 { font-size: 2rem; }
      .ios-card { border-radius: 0; margin: 0 -1rem; }
      .seo-content { margin: 4rem -1rem 0; padding: 2rem 1rem 0; border-radius: 0;}
    }
  </style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weight Converter</title>
    <link rel="stylesheet" href="style.css">
</head>
  
<nav>
  <div class="logo">
    <img src="public/Gemini_Generated_Image_7ijaav7ijaav7ija.png" alt="WebToolbox Logo" />
    ðŸ§° WebToolbox
  </div>
  <div class="nav-title-scrolled" data-translate-key="mainTitle">Convertitore Immagini</div>
  <ul class="desktop-nav">
    <li><a href="index.html" class="active">Converti</a></li>
    <li><a href="ridimensiona.html">Ridimensiona</a></li>
    <li><a href="ruota-immagini.html">Ruota</a></li>
    <li><a href="flip-immagini.html">Specchia</a></li>
    <li><a href="crop-immagini.html">Ritaglia</a></li>
    <li><a href="base64.html">Base64</a></li>
    <li><a href="scala-grigi.html">Filtri</a></li>
    <li><a href="share.html">Condividi</a></li>
  </ul>
  <div class="nav-controls">
    <select id="themeSelector" title="Seleziona Tema"></select>
    <select id="langSelector" title="Seleziona Lingua"></select>
  </div>
  <button id="mobile-menu-trigger" title="Apri Menu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
  </button>
</nav>

<body>
    <div class="theme-toggle">
        <input type="checkbox" id="darkModeToggle">
        <label for="darkModeToggle" class="theme-toggle-label"></label> </div>
    <h1>Weight Converter</h1>

    <div class="container">
        <div>
            <label for="kilograms">Kilograms (kg):</label>
            <input type="number" id="kilograms">
        </div>
        <div>
            <label for="grams">Grams (g):</label>
            <input type="number" id="grams">
        </div>
        <div>
            <label for="pounds">Pounds (lbs):</label>
            <input type="number" id="pounds">
        </div>
        <div>
            <label for="milligrams">Milligrams (mg):</label>
            <input type="number" id="milligrams">
        </div>
        <div class="buttons-container">
            <button id="convertButton">Convert</button>
            <button id="clearButton">Clear</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
  <script>
    // script.js
document.addEventListener('DOMContentLoaded', function() {
    const body = document.body;
    const darkModeToggle = document.getElementById('darkModeToggle');
    const kilogramsInput = document.getElementById('kilograms');
    const gramsInput = document.getElementById('grams');
    const poundsInput = document.getElementById('pounds');
    const milligramsInput = document.getElementById('milligrams');
    const convertButton = document.getElementById('convertButton');
    const clearButton = document.getElementById('clearButton');
    const highlightDuration = 300;

    function saveConversion() {
        localStorage.setItem('lastKilograms', kilogramsInput.value);
        localStorage.setItem('lastGrams', gramsInput.value);
        localStorage.setItem('lastPounds', poundsInput.value);
        localStorage.setItem('lastMilligrams', milligramsInput.value);
        localStorage.setItem('darkMode', body.classList.contains('dark-mode'));
    }

    function loadLastConversion() {
        const lastKilograms = localStorage.getItem('lastKilograms');
        const lastGrams = localStorage.getItem('lastGrams');
        const lastPounds = localStorage.getItem('lastPounds');
        const lastMilligrams = localStorage.getItem('lastMilligrams');
        const darkModeEnabled = localStorage.getItem('darkMode') === 'true';

        if (darkModeEnabled) {
            body.classList.add('dark-mode');
            darkModeToggle.checked = true;
        }

        if (lastKilograms !== null) kilogramsInput.value = lastKilograms;
        if (lastGrams !== null) gramsInput.value = lastGrams;
        if (lastPounds !== null) poundsInput.value = lastPounds;
        if (lastMilligrams !== null) milligramsInput.value = lastMilligrams;

        if (lastKilograms) kilogramsInput.dispatchEvent(new Event('input'));
        else if (lastGrams) gramsInput.dispatchEvent(new Event('input'));
        else if (lastPounds) poundsInput.dispatchEvent(new Event('input'));
        else if (lastMilligrams) milligramsInput.dispatchEvent(new Event('input'));
    }

    function clearAllInputsExcept(elementToExclude) {
        if (elementToExclude !== kilogramsInput) kilogramsInput.value = '';
        if (elementToExclude !== gramsInput) gramsInput.value = '';
        if (elementToExclude !== poundsInput) poundsInput.value = '';
        if (elementToExclude !== milligramsInput) milligramsInput.value = '';
    }

    function highlightInput(inputElement) {
        inputElement.classList.add('conversion-highlight');
        setTimeout(() => {
            inputElement.classList.remove('conversion-highlight');
        }, highlightDuration);
    }

    darkModeToggle.addEventListener('change', function() {
        body.classList.toggle('dark-mode');
        saveConversion(); 
    });

    kilogramsInput.addEventListener('input', function() {
        clearAllInputsExcept(kilogramsInput);
        const kg = parseFloat(kilogramsInput.value);
        if (!isNaN(kg)) {
            gramsInput.value = (kg * 1000).toFixed(2);
            poundsInput.value = (kg * 2.20462).toFixed(2);
            milligramsInput.value = (kg * 1000000).toFixed(2);
            highlightInput(gramsInput);
            highlightInput(poundsInput);
            highlightInput(milligramsInput);
            saveConversion();
        } else {
            saveConversion();
        }
    });

    gramsInput.addEventListener('input', function() {
        clearAllInputsExcept(gramsInput);
        const g = parseFloat(gramsInput.value);
        if (!isNaN(g)) {
            kilogramsInput.value = (g / 1000).toFixed(2);
            poundsInput.value = (g * 0.00220462).toFixed(2);
            milligramsInput.value = (g * 1000).toFixed(2);
            highlightInput(kilogramsInput);
            highlightInput(poundsInput);
            highlightInput(milligramsInput);
            saveConversion();
        } else {
            saveConversion();
        }
    });

    poundsInput.addEventListener('input', function() {
        clearAllInputsExcept(poundsInput);
        const lbs = parseFloat(poundsInput.value);
        if (!isNaN(lbs)) {
            kilogramsInput.value = (lbs / 2.20462).toFixed(2);
            gramsInput.value = (lbs / 0.00220462).toFixed(2);
            milligramsInput.value = (lbs * 453592.37).toFixed(2);
            highlightInput(kilogramsInput);
            highlightInput(gramsInput);
            highlightInput(milligramsInput);
            saveConversion();
        } else {
            saveConversion();
        }
    });

    milligramsInput.addEventListener('input', function() {
        clearAllInputsExcept(milligramsInput);
        const mg = parseFloat(milligramsInput.value);
        if (!isNaN(mg)) {
            kilogramsInput.value = (mg / 1000000).toFixed(2);
            gramsInput.value = (mg / 1000).toFixed(2);
            poundsInput.value = (mg / 453592.37).toFixed(2);
            highlightInput(kilogramsInput);
            highlightInput(gramsInput);
            highlightInput(poundsInput);
            saveConversion();
        } else {
            saveConversion();
        }
    });

    convertButton.addEventListener('click', function() {
        alert("Conversions are now real-time as you type!");
    });

    clearButton.addEventListener('click', function() {
        kilogramsInput.value = '';
        gramsInput.value = '';
        poundsInput.value = '';
        milligramsInput.value = '';
        saveConversion();
    });

    loadLastConversion();
});
  </script>
</html>
