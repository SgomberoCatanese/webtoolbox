<!DOCTYPE html><html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ruota immagini online â€“ WebToolbox.fun</title>
  <meta name="description" content="Ruota immagini JPG e PNG online. Seleziona una o piÃ¹ immagini con rotazione personalizzata o preset. Scarica gratis le immagini ruotate.">
  <style>
    /*
      Stile CSS con estetica iOS e logica mobile avanzata
    */

    /* Reset e Stili Globali */
    body {
      background: #000000;
      color: #F2F2F7;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0; padding: 0;
      display: flex; flex-direction: column; min-height: 100vh;
    }
    
    /* --- Navigazione --- */
    nav {
      background: rgba(28, 28, 30, 0.75);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 0.5px solid rgba(84, 84, 88, 0.65);
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 20;
    }

    nav .logo {
      font-weight: 600;
      font-size: 1.1rem;
      color: #F2F2F7;
    }

    nav ul {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      flex-wrap: wrap;
      margin: 0;
    }

    nav a {
      color: #0A84FF;
      text-decoration: none;
      font-weight: 500;
    }

    nav a.active {
      color: #F2F2F7;
      font-weight: 600;
    }
    
    #mobile-menu-trigger {
      display: none;
    }

    /* --- Contenuto Principale --- */
    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1.5rem 4rem 1.5rem;
      width: 100%;
      box-sizing: border-box;
      text-align: center;
    }

    h1 {
      text-align: center;
      margin-bottom: 0.5rem;
      font-size: 2.5rem;
      font-weight: 700;
    }

    p {
      text-align: center;
      margin-bottom: 2.5rem;
      color: #AEAEB2;
      line-height: 1.5;
    }
    
    /* --- Stile dei Componenti UI --- */
    input[type="file"] {
      display: none;
    }

    main button {
      background: #0A84FF;
      border: none;
      color: #FFFFFF;
      padding: 0.9rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      max-width: 300px;
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.2s ease-in-out;
      margin: 1rem auto;
    }

    main button:hover {
      transform: scale(1.05);
      filter: brightness(1.1);
    }

    #previewContainer {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: center;
      margin-top: 2rem;
    }
    
    /* Card per ogni immagine */
    .imgBox {
      background: #1C1C1E;
      padding: 1rem;
      border-radius: 20px;
      border: none;
      text-align: left;
      width: 280px;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .imgBox img {
      width: 100%;
      height: 150px;
      object-fit: contain;
      border-radius: 12px;
      display: block;
      margin: 0 auto 0.5rem;
      background-color: #000;
    }

    .imgBox select, .imgBox input[type="number"] {
      width: 100%;
      padding: 0.7rem 1rem;
      border-radius: 12px;
      border: 1px solid #3a3a3c;
      background-color: #2C2C2E;
      color: #F2F2F7;
      font-family: inherit;
      font-size: 0.9rem;
      box-sizing: border-box;
      -webkit-appearance: none;
      appearance: none;
    }
    
    /* Output */
    #output {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid #3a3a3c;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
    }
    
    #output img {
      max-width: 100%;
      border-radius: 12px;
      border: none;
      background-color: #1c1c1e;
      padding: 0.5rem;
    }
    #output a {
      color: #0A84FF;
      text-decoration: none;
      font-weight: 500;
    }

    /* === STILI VERSIONE MOBILE === */
    @media (max-width: 768px) {
      nav ul {
        display: none;
        position: absolute;
        top: 65px;
        right: 1.5rem;
        width: 250px;
        background: rgba(44, 44, 46, 0.9);
        backdrop-filter: blur(24px) saturate(180%);
        -webkit-backdrop-filter: blur(24px) saturate(180%);
        border-radius: 14px;
        border: 1px solid rgba(84, 84, 88, 0.65);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        padding: 0.5rem 0;
        flex-direction: column;
        gap: 0;
        z-index: 100;
      }
      
      nav ul.mobile-menu-active { display: flex; }
      
      nav ul li { width: 100%; }
      nav ul li a {
        display: block;
        padding: 0.9rem 1.25rem;
        color: #F2F2F7;
        font-weight: 400;
        border-bottom: 0.5px solid rgba(84, 84, 88, 0.65);
      }
      nav ul li:last-child a { border-bottom: none; }
      nav ul li a.active { background-color: #0A84FF; color: #FFFFFF; }
      
      #mobile-menu-trigger {
        display: block;
        background: none;
        border: none;
        padding: 0.5rem;
        cursor: pointer;
      }
      #mobile-menu-trigger svg { width: 24px; height: 24px; fill: #0A84FF; }

      h1 { font-size: 2rem; }
      main { padding: 0 1rem 4rem 1rem; }
      .imgBox { width: 100%; box-sizing: border-box; }
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo">ðŸ§° WebToolbox.fun</div>
    <ul>
      <li><a href="index.html">Converti</a></li>
      <li><a href="ridimensiona.html">Ridimensiona</a></li>
      <li><a href="ruota-immagini.html" class="active">Ruota</a></li>
      <li><a href="flip-immagini.html">Specchia</a></li>
      <li><a href="crop-immagini.html">Ritaglia</a></li>
      <li><a href="base64.html">Base64</a></li>
      <li><a href="scala-grigi.html">Grigi</a></li>
    </ul>
    <button id="mobile-menu-trigger" aria-label="Apri menu">
        <svg viewBox="0 0 100 80" width="40" height="40">
          <circle cx="50" cy="10" r="8"/><circle cx="50" cy="40" r="8"/><circle cx="50" cy="70" r="8"/>
        </svg>
    </button>
  </nav>
  <main>
    <h1>Ruota immagini online</h1>
    <p>Carica una o piÃ¹ immagini e scegli l'angolo di rotazione per ciascuna. Puoi usare preset o inserire un valore personalizzato.</p>
    
    <button onclick="document.getElementById('fileInput').click()" type="button">Seleziona Immagini</button>
    <input type="file" id="fileInput" accept="image/*" multiple>

    <div id="previewContainer"></div>

    <button id="rotateBtn">Applica e Scarica</button>

    <div id="output"></div>
  </main>
  
  <script>
    // Script esistente (logica invariata)
    const fileInput = document.getElementById('fileInput');
    const previewContainer = document.getElementById('previewContainer');
    const rotateBtn = document.getElementById('rotateBtn');
    const output = document.getElementById('output');
    let files = [];

    fileInput.addEventListener('change', () => {
      files = Array.from(fileInput.files);
      previewContainer.innerHTML = '';
      output.innerHTML = '';

      files.forEach((file, index) => {
        const reader = new FileReader();
        reader.onload = e => {
          const box = document.createElement('div');
          box.className = 'imgBox';
          
          const img = document.createElement('img');
          img.src = e.target.result;
          
          const select = document.createElement('select');
          [0, 90, 180, 270].forEach(val => {
            const option = document.createElement('option');
            option.value = val;
            option.textContent = val + 'Â°';
            select.appendChild(option);
          });
          const customOpt = document.createElement('option');
          customOpt.value = 'custom';
          customOpt.textContent = 'Personalizzato';
          select.appendChild(customOpt);
          
          const input = document.createElement('input');
          input.type = 'number';
          input.placeholder = 'Gradi (es. 45)';
          input.style.display = 'none';
          
          select.onchange = () => {
            input.style.display = select.value === 'custom' ? 'block' : 'none';
          }
          
          box.appendChild(img);
          box.appendChild(select);
          box.appendChild(input);
          box.dataset.index = index;
          previewContainer.appendChild(box);
        }
        reader.readAsDataURL(file);
      });
    });

    rotateBtn.addEventListener('click', () => {
      output.innerHTML = '';
      if (files.length === 0) {
        alert("Per favore, carica almeno un'immagine.");
        return;
      }
      
      document.querySelectorAll('.imgBox').forEach((box, i) => {
        const file = files[i];
        if (!file) return;

        const select = box.querySelector('select');
        const input = box.querySelector('input');
        const deg = select.value === 'custom' ? parseInt(input.value || '0') : parseInt(select.value);
        
        const reader = new FileReader();
        reader.onload = e => {
          const img = new Image();
          img.onload = () => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const rad = deg * Math.PI / 180;
            const sin = Math.abs(Math.sin(rad)), cos = Math.abs(Math.cos(rad));
            canvas.width = img.width * cos + img.height * sin;
            canvas.height = img.width * sin + img.height * cos;
            
            ctx.translate(canvas.width / 2, canvas.height / 2);
            ctx.rotate(rad);
            ctx.drawImage(img, -img.width / 2, -img.height / 2);
            
            canvas.toBlob(blob => {
              const url = URL.createObjectURL(blob);
              const outImg = document.createElement('img');
              outImg.src = url;
              
              const link = document.createElement('a');
              link.href = url;
              link.download = `ruotata_${file.name}`;
              link.textContent = 'Scarica ' + file.name;

              const resultBox = document.createElement('div');
              resultBox.appendChild(outImg);
              resultBox.appendChild(link);
              output.appendChild(resultBox);
            });
          }
          img.src = e.target.result;
        }
        reader.readAsDataURL(file);
      });
    });
  </script>
  <script>
    // --- LOGICA PER MENU MOBILE ---
    const mobileMenuTrigger = document.getElementById('mobile-menu-trigger');
    const navUl = document.querySelector('nav ul');

    if (mobileMenuTrigger && navUl) {
      mobileMenuTrigger.addEventListener('click', (event) => {
        event.stopPropagation();
        navUl.classList.toggle('mobile-menu-active');
      });
      document.addEventListener('click', (event) => {
        if (navUl.classList.contains('mobile-menu-active') && !navUl.contains(event.target)) {
          navUl.classList.remove('mobile-menu-active');
        }
      });
    }
  </script>
</body>
</html>
